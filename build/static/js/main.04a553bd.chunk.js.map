{"version":3,"sources":["namesnumbers.js","nameForm.js","filterForm.js","serverService.js","App.js","index.js"],"names":["Persons","persons","remove","map","person","key","name","number","onClick","nameForm","props","onSubmit","addName","value","newName","onChange","handleNameInput","newNumber","handleNumInput","type","filter","newFilter","handleFilterInput","axios","get","then","response","data","newPerson","post","res","id","delete","toUpdate","find","p","updatedPerson","put","Notification","message","className","Error","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","notifMessage","setNotification","errorMessage","setError","replaceNum","server","r","setTimeout","catch","err","handleError","namesToShow","match","RegExp","useEffect","event","target","preventDefault","some","window","confirm","added","console","log","concat","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.04a553bd.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Persons = ({persons, remove}) => {\r\n    return(\r\n        persons.map(person =>\r\n            <p key={person.name}>\r\n                {person.name}: {person.number}\r\n                <button onClick={() => remove(person)} >delete</button>\r\n            </p>\r\n            )\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst nameForm = (props) =>{\r\n\r\n    return (\r\n        <form onSubmit={props.addName}>\r\n            <div>\r\n            name: <input value={props.newName} onChange={props.handleNameInput}/>\r\n            </div>\r\n            <div>\r\n                number: <input value={props.newNumber} onChange={props.handleNumInput} />\r\n            </div>\r\n            <div>\r\n            <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n\r\n        )\r\n}\r\n\r\nexport default nameForm","import React from 'react'\r\n\r\nconst filter = (props) =>{\r\n    return (\r\n        <form>\r\n          <div>\r\n              filter shown names: <input value={props.newFilter} onChange={props.handleFilterInput} />\r\n          </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default filter","import axios from 'axios'\r\n\r\nconst getAll = () =>{\r\n    const data = axios.get('/api/persons')\r\n\r\n    return data.then(response => response.data)\r\n}\r\n\r\nconst addNew = (newPerson) =>{\r\n    const promise = axios.post('/api/persons', newPerson)\r\n    return promise.then(res => res.data)\r\n}\r\n\r\nconst removeName = (id) =>{\r\n    return axios.delete(`/api/persons/${id}`)\r\n}\r\n\r\nconst replaceNum = (persons, name, number) =>{\r\n\r\n    const toUpdate = persons.find(p => p.name === name)\r\n    const updatedPerson = { ... toUpdate, number: number}\r\n    const updated = axios.put(`http://localhost:3001/api/persons/${updatedPerson.id}`, updatedPerson)\r\n    return updated.then(response => response.data)\r\n}\r\n\r\nexport default {getAll, addNew, removeName, replaceNum}","import React, { useState, useEffect } from 'react'\r\nimport Persons from './namesnumbers'\r\nimport NameForm from './nameForm'\r\nimport FilterForm from './filterForm'\r\nimport server from './serverService'\r\n\r\nconst Notification = ({message}) =>{\r\n  if (message === null){\r\n    return null\r\n  }\r\n\r\n  return(\r\n    <div className='notification'>\r\n    {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Error = ({message}) =>{\r\n  if (message === null){\r\n    return null\r\n  }\r\n\r\n  return(\r\n    <div className='error'>\r\n    {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [newFilter, setNewFilter ] = useState('')\r\n\r\n  const [ notifMessage, setNotification] = useState('')\r\n  const [ errorMessage, setError] = useState('')\r\n\r\n\r\n  const addName = (event) =>{\r\n    event.preventDefault()\r\n\r\n    const match = (person) => person.name === newName\r\n    const alreadyInList = persons.some(match)\r\n    if (alreadyInList){\r\n\r\n        const replace = window.confirm(`${newName} is already in the phonebook. Replace their older number with ${newNumber}?`)\r\n        if (replace){\r\n          replaceNum(newName, newNumber)\r\n\r\n        }\r\n\r\n        return\r\n    }\r\n\r\n    const newPerson = {\r\n        name: newName,\r\n        number: newNumber\r\n    }\r\n\r\n    server.addNew(newPerson)\r\n    .then (added =>{\r\n      console.log('New name added: ', added.name)\r\n      setPersons(persons.concat(added))\r\n\r\n      setNotification(`Added ${newName}`)\r\n      setTimeout(() =>{\r\n        setNotification('')\r\n      }, 5000)\r\n\r\n      })\r\n    .catch(error =>{\r\n      console.log(error.response.data)\r\n      setError(`${error.response.data.error}`)\r\n      setTimeout(() => {\r\n        setError('')\r\n      }, 5000);\r\n    })\r\n    \r\n  }\r\n\r\n  const removeName = (p) =>{\r\n    const toDelete = window.confirm(`Are you sure you want to delete ${p.name} from the phonebook?`)\r\n\r\n    if (toDelete){\r\n      server.removeName(p.id).then(response =>{\r\n        const names = server.getAll()\r\n        names.then(response =>{\r\n          setPersons(response)\r\n\r\n          setNotification(`Deleted ${p.name}`)\r\n          setTimeout(() =>{\r\n            setNotification('')\r\n          }, 5000)\r\n        })\r\n      })\r\n\r\n      .catch(err =>{\r\n        handleError(p.name)\r\n      })\r\n    }  \r\n  }\r\n\r\n  const replaceNum = (name, number) =>{\r\n    server.replaceNum(persons, name, number).then(r =>{\r\n      const names = server.getAll()\r\n      names.then(response =>{\r\n        setPersons(response)\r\n\r\n        setNotification(`Succesfully changed ${newName}'s number!`)\r\n        setTimeout(() =>{\r\n          setNotification('')\r\n        }, 5000)\r\n      })\r\n    })\r\n\r\n    .catch(err =>{\r\n      handleError(name)\r\n    })\r\n  }\r\n\r\n  const handleError = (name) =>{\r\n    setError(`${name} has already been removed`)\r\n      setTimeout(() =>{\r\n        setError('')\r\n      }, 5000)\r\n\r\n      const data = server.getAll()\r\n      data.then(response => {\r\n        setPersons(response)\r\n      })\r\n  }\r\n\r\n  const handleNameInput = (event) =>{\r\n    \r\n    setNewName(event.target.value)\r\n    \r\n  }\r\n\r\n  const handleNumInput = (event) =>{\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const namesToShow = persons.filter(person => person.name.match(new RegExp(newFilter, \"i\")))\r\n\r\n  const handleFilterInput = (event) =>{\r\n      setNewFilter(event.target.value)\r\n      \r\n  }\r\n\r\n  useEffect(() =>{\r\n    const data = server.getAll()\r\n    data.then(response => {\r\n      setPersons(response)\r\n    })\r\n   }, [])\r\n\r\n  \r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n      <FilterForm newFilter={newFilter} handleFilterInput={handleFilterInput}/>      \r\n\r\n      <h2>Add New</h2>\r\n      <NameForm addName={addName} newName={newName} handleNameInput={handleNameInput}\r\n      newNumber={newNumber} handleNumInput={handleNumInput}/>\r\n\r\n      <Notification message={notifMessage} />\r\n      <Error message={errorMessage} />\r\n\r\n      <h2>Numbers</h2>\r\n      <Persons persons={namesToShow} remove={removeName}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}